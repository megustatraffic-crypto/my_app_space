<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Cosmic Farm</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon192.png" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- SPLASH -->
  <div id="splash" class="splash active">
    <div class="splash-inner">
      <img src="ui/btn_home.png.jpg" alt="logo" class="splash-logo" onerror="this.style.display='none'">
      <h1>Cosmic Farm</h1>
      <p class="sub">Initializing orbital farm...</p>
      <div class="loader"><div></div><div></div><div></div></div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" class="app hidden">

    <!-- TOP BAR -->
    <header class="top">
      <div id="house" class="house"></div>
      <div class="info">
        <div id="playerName" class="playerName">Guest</div>
        <div id="playerStats" class="playerStats">Frags: 0 ‚Ä¢ Lvl 1 ‚Ä¢ Drones: 0</div>
      </div>
      <div class="top-right">
        <div class="currency">
          <img src="currency/currency_crystal.png.jpg" alt="crystal" />
          <span id="crystalCount">0</span>
        </div>
        <div class="currency">
          <img src="currency/currency_star.jpg" alt="star" />
          <span id="starCount">0</span>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <main class="main">
      <div id="farmArea" class="farm-area" style="background-image: url('backgrounds/bg_alien_ground.png.jpg')">
        <div id="farm" class="farm grid-3"></div>
        <canvas id="droneCanvas" class="drone-canvas"></canvas>
      </div>

      <p class="hint">Tap a tile to plant ‚Ä¢ Tap grown crop to harvest</p>
    </main>

    <!-- PANELS -->
    <div id="panelShop" class="panel" hidden>
      <h2>üè™ Shop</h2>
      <div class="card">
        <b>Drone Mk.I</b><br>Auto-collect crops<br>Price: 10 CRYSTAL
        <button class="buyBtn" onclick="buyDroneUI()">Buy</button>
      </div>
      <div class="card">
        <b>Upgrade Farm +1</b><br>More tiles<br>Price: 50 CRYSTAL
        <button class="buyBtn" onclick="buyFarmUI()">Buy</button>
      </div>
      <div class="card" id="seedSelector"></div>
      <button class="close" onclick="closePanels()">Close</button>
    </div>

    <div id="panelDrones" class="panel" hidden>
      <h2>ü§ñ Drones</h2>
      <p>You have: <span id="droneCount">0</span></p>
      <p>Active drones auto-collect grown crops.</p>
      <button class="close" onclick="closePanels()">Close</button>
    </div>

    <div id="panelQuests" class="panel" hidden>
      <h2>üìú Quests</h2>
      <div id="questHarvest" class="card"></div>
      <button class="close" onclick="closePanels()">Close</button>
    </div>

    <div id="panelProfile" class="panel" hidden>
      <h2>üë§ Profile</h2>
      <div class="card">
        <label>Name</label>
        <input id="nameInput" type="text" placeholder="Player name" />
        <button class="buyBtn" onclick="saveName()">Save</button>
      </div>
      <div class="card">
        <label>Avatar URL</label>
        <input id="avatarInput" type="text" placeholder="https://..." />
        <button class="buyBtn" onclick="saveAvatar()">Save Avatar</button>
      </div>
      <button class="close" onclick="closePanels()">Close</button>
    </div>

    <div id="panelCase" class="panel" hidden>
      <h2>üéÅ Case</h2>
      <div id="casePreview" class="card">Open a case to get items.</div>
      <button class="buyBtn" onclick="openCase('common')">Open Common</button>
      <button class="close" onclick="closePanels()">Close</button>
    </div>

    <!-- BOTTOM MENU -->
    <nav class="menu">
      <button id="btnFarm" onclick="openFarm()" class="menu-btn">
        <img src="ui/btn_home.png.jpg" alt="farm" onerror="this.style.display='none'"> Farm
      </button>
      <button id="btnShop" onclick="openPanel('panelShop')" class="menu-btn">
        <img src="ui/btn_shop.png.jpg" alt="shop" onerror="this.style.display='none'"> Shop
      </button>
      <button id="btnDrones" onclick="openPanel('panelDrones')" class="menu-btn">
        <img src="ui/btn_drone.png.jpg" alt="drones" onerror="this.style.display='none'"> Drones
      </button>
      <button id="btnCases" onclick="openPanel('panelCase')" class="menu-btn">
        <img src="ui/btn_case.png.jpg" alt="case" onerror="this.style.display='none'"> Cases
      </button>
      <button id="btnProfile" onclick="openPanel('panelProfile')" class="menu-btn">
        <img src="ui/btn_profile.png.jpg" alt="profile" onerror="this.style.display='none'"> Profile
      </button>
    </nav>

  </div>

  <script src="telegram-init.js"></script>
  <script src="api.js"></script>
  <script src="app.js"></script>
</body>
</html>
