<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Galactic Conglomerate — Terra</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="title">Terra — Planet I</div>
      <div class="meta">
        <div id="playerName">—</div>
        <div id="energyBox">⚡ <span id="energyVal">0</span>/<span id="energyMax">0</span></div>
        <button id="btnShop" class="small">Shop ⭐</button>
      </div>
    </header>

    <main class="main">
      <section class="left">
        <div class="planet-wrap card">
          <img id="planetImg" src="assets/terra_planet.png" alt="Terra" class="planet"/>
        </div>

        <div class="inventory card">
          <h3>Inventory</h3>
          <div class="res-list">
            <div class="res-item"><img src="assets/r1_iron_one.png"><div class="meta"><div class="res-label">Iron</div><div id="R1_1" class="res-value">0</div></div></div>
            <div class="res-item"><img src="assets/r1_charcoal.png"><div class="meta"><div class="res-label">Charcoal</div><div id="R1_2" class="res-value">0</div></div></div>
            <div class="res-item"><img src="assets/r1_water.png"><div class="meta"><div class="res-label">Water</div><div id="R1_3" class="res-value">0</div></div></div>
            <div class="res-item"><img src="assets/p1_core.png"><div class="meta"><div class="res-label">P1</div><div id="P1" class="res-value">0</div></div></div>
          </div>
        </div>

        <div class="tap card">
          <div class="resource-selector">
            <button class="res-select" data-resource="R1_1" id="sel_R1_1">Iron</button>
            <button class="res-select" data-resource="R1_2" id="sel_R1_2">Charcoal</button>
            <button class="res-select" data-resource="R1_3" id="sel_R1_3">Water</button>
          </div>
          <button id="tapBtn" class="big-tap">TAP TO MINE</button>
          <div class="tap-row">
            <div id="combo" class="combo">x1</div>
            <div id="lowEnergy" class="lowEnergy hidden">No energy — <button id="buyEnergySmall" class="small">+25 ⚡ (3⭐)</button> <button id="buyEnergyLarge" class="small">+100 ⚡ (9⭐)</button></div>
          </div>
        </div>
      </section>

      <section class="right">
        <div class="factories card">
          <h3>Factories</h3>
          <div class="factory-grid">
            <div class="factory" data-module="extractor">
              <img src="assets/module_extractor_r1.png" />
              <div class="factory-controls">
                <div class="name">Extractor <span class="lvl">lv <span id="lvl_extractor">1</span></span></div>
                <div class="progress"><div id="bar_extractor" class="bar"></div></div>
                <div class="f-buttons">
                  <button data-module="extractor" class="toggle">Start/Stop</button>
                  <button data-module="extractor" class="upgrade">Upgrade</button>
                </div>
              </div>
            </div>

            <div class="factory" data-module="smelter">
              <img src="assets/module_smelter_r1.png" />
              <div class="factory-controls">
                <div class="name">Smelter <span class="lvl">lv <span id="lvl_smelter">1</span></span></div>
                <div class="progress"><div id="bar_smelter" class="bar"></div></div>
                <div class="f-buttons">
                  <button data-module="smelter" class="toggle">Start/Stop</button>
                  <button data-module="smelter" class="upgrade">Upgrade</button>
                </div>
              </div>
            </div>

            <div class="factory" data-module="pump">
              <img src="assets/module_pump_r1.png" />
              <div class="factory-controls">
                <div class="name">Pump <span class="lvl">lv <span id="lvl_pump">1</span></span></div>
                <div class="progress"><div id="bar_pump" class="bar"></div></div>
                <div class="f-buttons">
                  <button data-module="pump" class="toggle">Start/Stop</button>
                  <button data-module="pump" class="upgrade">Upgrade</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="craft card">
          <h3>Craft</h3>
          <div class="craft-info">Recipe: Iron ×100, Charcoal ×60, Water ×40</div>
          <div class="craft-row">
            <button id="craftP1" class="cta">Craft P1</button>
            <div id="craftStatus" class="craftStatus"></div>
          </div>
        </div>

        <div class="logs card">
          <h3>Events</h3>
          <div id="logBox" class="logBox"></div>
          <div style="margin-top:8px">
            <button id="startAll" class="buy-btn">Start All Factories</button>
            <button id="overdriveShort" class="buy-btn">Overdrive 10m (3⭐)</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      Backend: <span id="backendUrl">https://my-app-space.onrender.com</span> • <span id="status">idle</span>
    </footer>
  </div>

  <!-- Shop modal -->
  <div id="shopModal" class="modal hidden">
    <div class="modal-card">
      <h3>Shop — Antimatter (Stars)</h3>
      <div class="shop-grid">
        <div class="shop-item">
          <div class="tag">3 ⭐</div>
          <div class="desc">Energy Pack +25</div>
          <button data-buy="energy_25" class="buy">Buy</button>
        </div>
        <div class="shop-item">
          <div class="tag">9 ⭐</div>
          <div class="desc">Energy Pack +100</div>
          <button data-buy="energy_100" class="buy">Buy</button>
        </div>
        <div class="shop-item">
          <div class="tag">6 ⭐</div>
          <div class="desc">Autoclicker 30m</div>
          <button data-buy="autoclick_30" class="buy">Buy</button>
        </div>
        <div class="shop-item">
          <div class="tag">3 ⭐</div>
          <div class="desc">Overdrive 10m</div>
          <button data-buy="overdrive_10" class="buy">Buy</button>
        </div>
      </div>
      <button id="closeShop" class="close">Close</button>
    </div>
  </div>

  <div id="bgLayer" class="bg-layer" style="display:none"></div>
  <script src="app.js"></script>
</body>
</html>
